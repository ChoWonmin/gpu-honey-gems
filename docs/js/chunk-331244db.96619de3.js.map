{"version":3,"sources":["webpack:///./src/render/Fractal/Fractal.vue?b262","webpack:///./src/render/Fractal/Shader.ts","webpack:///./src/render/Fractal/Fractal.ts","webpack:///./src/render/Fractal/Fractal.ts?a801","webpack:///./src/render/Fractal/Fractal.vue","webpack:///./src/render/Fractal/index.ts","webpack:///./src/render/Fractal/Fractal.vue?1313"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","vertexShader","fragmentShader","camera","scene","renderer","width","height","container","document","getElementById","clientWidth","clientHeight","position","z","instances","positions","offsets","colors","push","i","Math","random","geometry","maxInstancedCount","addAttribute","Float32Array","material","uniforms","time","value","sineTime","side","transparent","mesh","add","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","requestAnimationFrame","animate","performance","now","children","init","console","warn","dispose","components","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,gBAClHC,EAAkB,G,4GCDP,MAAK,oCACX,KAAAC,aAAA,scAmBA,KAAAC,eAAA,yQCXY,EAArB,YALA,iD,+DAMU,EAAAC,OAAc,KACd,EAAAC,MAAa,KACb,EAAAC,SAAgB,KAEhB,EAAAC,OAAiB,EACjB,EAAAC,QAAkB,EAX5B,EAKA,0EASI,IAAMC,EAAYC,SAASC,eAAe,aAE1ChB,KAAKY,MAAQE,EAAUG,YACvBjB,KAAKa,OAASC,EAAUI,aAExBlB,KAAKU,MAAQ,IAAI,OAEjBV,KAAKS,OAAS,IAAI,OAChB,GACAT,KAAKY,MAAQZ,KAAKa,OAClB,EACA,IAEFb,KAAKS,OAAOU,SAASC,EAAI,EAGV,IAAI,OAAnB,IACMC,EAAY,EACZC,EAAY,GACZC,EAAU,GACVC,EAAS,GAEfF,EAAUG,KAAK,EAAG,EAAG,GACrBH,EAAUG,KAAK,GAAK,IAAM,IAC1BH,EAAUG,KAAK,EAAG,EAAG,GAErB,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAWK,IAE7BH,EAAQE,KAAKE,KAAKC,SAAW,GAAKD,KAAKC,SAAW,GAAK,GAEvDJ,EAAOC,KAAKE,KAAKC,SAAUD,KAAKC,SAAUD,KAAKC,SAAU,GAG3D,IAAMC,EAAW,IAAI,OACrBA,EAASC,kBAAoBT,EAC7BQ,EAASE,aACP,WACA,IAAI,OAA6BT,EAAW,IAE9CO,EAASE,aACP,SACA,IAAI,OAA+B,IAAIC,aAAaT,GAAU,IAEhEM,EAASE,aACP,QACA,IAAI,OAA+B,IAAIC,aAAaR,GAAS,IAI/D,IAAMS,EAAW,IAAI,OAAwB,CAC3CC,SAAU,CACRC,KAAM,CAAEC,MAAO,GACfC,SAAU,CAAED,MAAO,IAErB7B,aAAc,EAAOA,aACrBC,eAAgB,EAAOA,eACvB8B,KAAM,OACNC,aAAa,IAGTC,EAAO,IAAI,OAAWX,EAAUI,GACtCjC,KAAKU,MAAM+B,IAAID,GAEfxC,KAAKW,SAAW,IAAI,OACpBX,KAAKW,SAAS+B,cAAcC,OAAOC,kBACnC5C,KAAKW,SAASkC,QAAQ7C,KAAKY,MAAOZ,KAAKa,QAEnCC,GACFA,EAAUgC,YAAY9C,KAAKW,SAASoC,cA7E1C,gCAkFIC,sBAAsBhD,KAAKiD,SAEdC,YAAYC,MACVnD,KAAKU,MAAM0C,SAAS,GAQnCpD,KAAKW,SAASb,OAAOE,KAAKU,MAAOV,KAAKS,UA7F1C,gCAiGIT,KAAKqD,OACLrD,KAAKiD,YAlGT,oCAsGIK,QAAQC,KAAK,iBACbvD,KAAKU,MAAM8C,UACXxD,KAAKW,SAAS6C,cAxGlB,GAAqC,QAAhB,EAAO,QAL3B,eAAU,CACTC,WAAY,MAIO,WCTmQ,I,wBCQpRC,EAAY,eACd,EACA5D,EACAQ,GACA,EACA,KACA,WACA,MAIa,EAAAoD,E,QCjBA,gB,kCCFf,yBAAymB,EAAG","file":"js/chunk-331244db.96619de3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default new (class Shader {\n  public vertexShader: string = `\n    precision highp float;\n\t\tuniform float sineTime;\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\t\tattribute vec3 position;\n\t\tattribute vec3 offset;\n\t\tattribute vec4 color;\n\n\t\tvarying vec3 vPosition;\n\t\tvarying vec4 vColor;\n\t\tvoid main(){\n\t\t\tvPosition = offset  + position;\n\t\t\t\n\t\t\tvColor = color;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\n\t\t}\n  `;\n\n  public fragmentShader: string = `\n    precision highp float;\n\t\tuniform float time;\n\t\tvarying vec3 vPosition;\n\t\tvarying vec4 vColor;\n\t\tvoid main() {\n\t\t\tvec4 color = vec4( vColor );\n\t\t\tcolor.r += sin( vPosition.x * 10.0 + time ) * 0.5;\n\t\t\tgl_FragColor = color;\n\t\t}\n  `;\n})();\n","import { Component, Vue } from 'vue-property-decorator';\nimport * as THREE from 'three';\nimport Shader from './Shader';\n\n@Component({\n  components: {\n    //\n  }\n})\nexport default class Fractal extends Vue {\n  private camera: any = null;\n  private scene: any = null;\n  private renderer: any = null;\n\n  private width: number = -1;\n  private height: number = -1;\n\n  private init() {\n    const container = document.getElementById('container') as HTMLElement;\n\n    this.width = container.clientWidth;\n    this.height = container.clientHeight;\n\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(\n      50,\n      this.width / this.height,\n      1,\n      10\n    );\n    this.camera.position.z = 2;\n\n    // geometry\n    const vector = new THREE.Vector4();\n    const instances = 1;\n    const positions = [];\n    const offsets = [];\n    const colors = [];\n\n    positions.push(1, 1, 0);\n    positions.push(0.5, 0.5, -0.1);\n    positions.push(0, 0, 0);\n\n    for (let i = 0; i < instances; i++) {\n      // offsets\n      offsets.push(Math.random() - 0.5, Math.random() - 0.5, 0);\n      // colors\n      colors.push(Math.random(), Math.random(), Math.random(), 1);\n    }\n\n    const geometry = new THREE.InstancedBufferGeometry();\n    geometry.maxInstancedCount = instances;\n    geometry.addAttribute(\n      'position',\n      new THREE.Float32BufferAttribute(positions, 3)\n    );\n    geometry.addAttribute(\n      'offset',\n      new THREE.InstancedBufferAttribute(new Float32Array(offsets), 3)\n    );\n    geometry.addAttribute(\n      'color',\n      new THREE.InstancedBufferAttribute(new Float32Array(colors), 4)\n    );\n\n    // material\n    const material = new THREE.RawShaderMaterial({\n      uniforms: {\n        time: { value: 1.0 },\n        sineTime: { value: 1.0 }\n      },\n      vertexShader: Shader.vertexShader,\n      fragmentShader: Shader.fragmentShader,\n      side: THREE.DoubleSide,\n      transparent: true\n    });\n\n    const mesh = new THREE.Mesh(geometry, material);\n    this.scene.add(mesh);\n\n    this.renderer = new THREE.WebGLRenderer();\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.width, this.height);\n\n    if (container) {\n      container.appendChild(this.renderer.domElement);\n    }\n  }\n\n  private animate() {\n    requestAnimationFrame(this.animate);\n\n    const time = performance.now();\n    const object = this.scene.children[0];\n\n    // object.rotation.y = time * 0.0005;\n    // object.material.uniforms['time'].value = time * 0.005;\n    // object.material.uniforms['sineTime'].value = Math.sin(\n    //   object.material.uniforms['time'].value * 0.05\n    // );\n\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  private mounted() {\n    this.init();\n    this.animate();\n  }\n\n  private beforeMount() {\n    console.warn('Instancing BD');\n    this.scene.dispose();\n    this.renderer.dispose();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--12-3!./Fractal.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--12-3!./Fractal.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Fractal.vue?vue&type=template&id=77f5b524&scoped=true&lang=pug&\"\nimport script from \"./Fractal.ts?vue&type=script&lang=ts&\"\nexport * from \"./Fractal.ts?vue&type=script&lang=ts&\"\nimport style0 from \"./Fractal.vue?vue&type=style&index=0&id=77f5b524&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77f5b524\",\n  null\n  \n)\n\nexport default component.exports","import Fractal from './Fractal.vue';\n\nexport default Fractal;\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fractal.vue?vue&type=style&index=0&id=77f5b524&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fractal.vue?vue&type=style&index=0&id=77f5b524&lang=scss&scoped=true&\""],"sourceRoot":""}